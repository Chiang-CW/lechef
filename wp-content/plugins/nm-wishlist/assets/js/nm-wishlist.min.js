/* NM Wishlist */
(function(b){var m={init:function(){var e=!1,k;if(Cookies){var d=Cookies.get("nm-wishlist-items");if(d){var d=JSON.parse(d),g;for(g in d)d.hasOwnProperty(g)&&b("#nm-wishlist-item-"+g+"-button").addClass("added")}}b(document).on("click",".nm-wishlist-button",function(a){a.preventDefault();var c=b(this);a=c.data("product-id");if(e)if(c.hasClass("ajax-running"))e.abort(),e=!1;else return;c.addClass("ajax-running");k=c;var f=b(".nm-wishlist-item-"+a+"-button"),c=f.first().hasClass("added")?1:0;f.toggleClass("added");
e=b.ajax({type:"POST",url:nm_wp_vars.ajaxUrl,data:{action:"nm_wishlist_toggle",remove_item:c,product_id:a},dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},complete:function(){k.removeClass("ajax-running");e=!1},success:function(a){"1"===a.status?(f.attr("title",nm_wishlist_vars.wlButtonTitleRemove),b("body").trigger("wishlist_added_item")):(f.attr("title",nm_wishlist_vars.wlButtonTitleAdd),b("body").trigger("wishlist_removed_item"))}})});var h=b("#nm-wishlist-table");if(h.length){var l=
function(a){var c=a.closest("tr");a=c.data("product-id");c.addClass("removing");c.find(".thumbnail > a").addClass("nm-loader");b.ajax({type:"POST",url:nm_wp_vars.ajaxUrl,data:{action:"nm_wishlist_toggle",remove_item:1,product_id:a},dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},success:function(a){0==h.children("tbody").children("tr").not(".removing").length&&(b("#nm-wishlist").css("display","none"),b("#nm-wishlist-empty").addClass("show"));c.remove();b("body").trigger("wishlist_removed_item")}})};
h.find(".title .nm-wishlist-remove").bind("click",function(a){a.preventDefault();a=b(this);a.hasClass("clicked")||(a.addClass("clicked"),l(a))});b(document.body).on("added_to_cart",function(a,b,e,d){l(d)})}}};b(document).ready(function(){m.init()})})(jQuery);